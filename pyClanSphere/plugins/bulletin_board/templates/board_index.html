{% extends "layout_content_only.html" %}
{% from "_board.html" import author_link, topic_name_link, lastpost_link %}
{% block title %}{{ _("Board index") }}{% endblock %}
{% block contents %}
<div class="entry">
  <table width="100%" style="" class="boardtable">
  {% for category, forums in categories.iteritems() %}
  <tr>
    <th class="categoryline" colspan="4"><a name="cat-{{ category.id }}"></a>{{ category.name }}</th>
  </tr>
  <tr>
    <th>{{ _("Name") }}</th>
    <th>{{ _("Topics") }}</th>
    <th>{{ _("Posts") }}</th>
    <th>{{ _("Last post") }}</th>
  </tr>  
  {% for forum in forums %}
  <tr>
    <td><a href="{{ url_for('board/topics', forum_id=forum.id) }}">{{ forum.name }}</a><br>{{ forum.description or '&nbsp;'|safe }}</td>
    <td class="count">{{ forum.topiccount or '0' }}</td>
    <td class="count">{{ forum.postcount or '0' }}</td>
    {% if forum.lasttopic_id %}
    <td>{%- trans date=lastpost_link(forum.lastpost)|safe, author=author_link(forum.lastpost.author)|safe
                  %}{{ date }}<br>by {{ author }}{% endtrans -%}</td>
    {% else %}  
    <td>&mdash;</td>
    {% endif %}  
  </tr>  
  {% endfor %}
  {% if not loop.last %}
  <tr><td colspan="4" class="borderless">&nbsp;</td></tr>
  {% endif %}
  {% endfor %}
  </table>
</div>
{% endblock %}